<!DOCTYPE html>
<html lang="es" style="background-color:white">
    <head>
        <meta charset="UTF-8"
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta>
        <title>Actividad 15</title>
    </head>
    <body>

        <a href="index.html" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;">Inicio</a>

        <p id="id" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;"></p>
        <h1 id="titulo" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;"></h1>

        <p id="cargando">Cargando datos</p>
        <p id="error"></p>
        <p id="lista"></p>
        <img src="https://colossalmedia.com/wp-content/uploads/2019/06/loading-bananas.gif" id="banana" style=padding:50%;">
        <img id="imagen">

        <script>
            const url = new URL(window.location.href)
            console.log(url);
            const parametro = url.searchParams;
            const id = parametro.get('id');
            console.log(id);
            document.getElementById('id').innerHTML = id;

            const urlDetalle = `https://jsonplaceholder.typicode.com/photos/${id}`;
            fetch(urlDetalle)
            .then(response => response.json())
            .then(foto => {
                document.getElementById('titulo').innerHTML = foto.title;
                document.getElementById('imagen').src = foto.url;
            })
            .catch(error => {
                document.getElementById('error').innerHTML = error.message;
                console.log(error);
            })
            .finally(() => {
                document.getElementById('cargando').innerHTML = "";
                document.getElementById('banana').src = "";
                console.log("Terminado");
            })
        </script>
    </body>
</html>